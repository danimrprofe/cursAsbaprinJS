<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="assets/css/piano.css">
    <link rel="stylesheet" href="assets/css/layout.css">

    <link rel="icon" type="image/png" sizes="128x128" href="assets/img/icons/favicon-128x128.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/img/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/img/icons/favicon-16x16.png">
    <link rel="icon" type="image/ico" href="assets/img/icons/favicon.ico">
</head>

<body>
    <header>
        <h1>Score Finder</h1>
    </header>
    <main>
        <div id="pianoDiv">

            <ul class="piano">
                <li class="key">
                    <span class="white-key" id="C"></span>
                    <span class="black-key" id="Cs"></span>
                </li>
                <li class="key">
                    <span class="white-key" id="D"></span>
                    <span class="black-key" id="Ds"></span>
                </li>
                <li class="key">
                    <span class="white-key" id="E"></span>
                </li>
                <li class="key">
                    <span class="white-key" id="F"></span>
                    <span class="black-key" id="Fs"></span>
                </li>
                <li class="key">
                    <span class="white-key" id="G"></span>
                    <span class="black-key" id="Gs"></span>
                </li>
                <li class="key">
                    <span class="white-key" id="A"></span>
                    <span class="black-key" id="As"></span>
                </li>
                <li class="key">
                    <span class="white-key" id="B"></span>
                </li>
                <li class="key">
                    <span class="white-key" id="C2"></span>
                </li>
            </ul>
        </div>

        <div id="resultat">
            <div>
                <h2>Cercant</h2>
                <p>
                    <span>Do Re Mi Fa#</span>
                    <button type="">Esborrar</button>
                </p>
            </div>
            <div>
                <h2>Resultats</h2>
                <ul>
                    <li>
                        <div>
                            <span>Sant Antoni i el Dimoni</span>
                            <span class="lyrics">Lletra</span>
                            <div>
                                <button>Reproduir cançò</button>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div>
                            <span>La balanguera</span>
                            <span class="lyrics">Lletra</span>
                            <div>
                                <button>Reproduir cançò</button>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

        </div>
    </main>
    <script>
        function Partitura(nom, notes) {
            this.nom = nom;
            this.notes = notes;
        }

        function Nota(nota, tipus) {
            this.nota = nota;
            this.tipus = tipus;
        }

        function addCerca(nota, tipus) {
            cerca.push(new Nota(nota, tipus))
        }

        function cercador() {
            var resultat = [];

            for (var i = 0; i < partitures.length; i++) {
                for (var j = 0; j < partitures[i].notes.length; j++) {
                    var trobat = true;
                    for (var k = 0; k < cerca.length; k++) {

                        if (
                            partitures[i].notes[j + k] === undefined ||
                            cerca[k].nota !== partitures[i].notes[j + k].nota ||
                            cerca[k].tipus !== partitures[i].notes[j + k].tipus
                        ) {
                            trobat = false;
                        }
                    }

                    if (trobat) {
                        resultat.push(partitures[i]);
                        break;
                    }
                }
            }

            return resultat;

        }

        //Balanguera
        var notesBalanguera = [
            new Nota("DO", "NORMAL"),
            new Nota("RE", "NORMAL"),
            new Nota("MI", "NORMAL"),
            new Nota("FA", "NORMAL"),
            new Nota("SOL", "NORMA"),
            new Nota("SOL", "NORMAL"),
            new Nota("SOL", "NORMAL"),
            new Nota("LA", "SOSTINGUT"),
            new Nota("LA", "SOSTINGUT"),
        ]

        var partituraBalanguera = new Partitura("Balanguera", notesBalanguera);

        var notesHappyBirthday = [
            new Nota("DO", "NORMAL"),
            new Nota("DO", "NORMAL"),
            new Nota("RE", "NORMAL"),
            new Nota("DO", "NORMAL"),
            new Nota("FA", "NORMAL"),
            new Nota("MI", "NORMAL"),
        ]

        var partituraHappyBirthday = new Partitura("Happy Birthday", notesHappyBirthday);

        var partitures = [
            partituraBalanguera,
            partituraHappyBirthday
        ]

        var cerca = [];

        addCerca("SOL", "NORMAL");
        addCerca("SOL", "NORMAL");
        addCerca("LA", "SOSTINGUT");

        var resultat = cercador();
        console.log(resultat);
        console.log(partitures[0].nom)
        console.log(partitures[1].nom)

    </script>
</body>

</html>